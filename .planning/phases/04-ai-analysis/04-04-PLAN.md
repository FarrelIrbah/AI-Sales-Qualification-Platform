---
phase: 04-ai-analysis
plan: 04
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - src/components/analysis/score-breakdown.tsx
  - src/components/analysis/company-insights.tsx
  - src/components/analysis/pitch-angles.tsx
  - src/components/analysis/objection-cards.tsx
autonomous: true

must_haves:
  truths:
    - "Component scores show as horizontal bars with percentages"
    - "Each component bar expands to show AI reasoning"
    - "Company insights show summary, strengths, and concerns"
    - "Pitch angles show headline + explanation + why it works"
    - "Objections show prediction paired with response"
  artifacts:
    - path: "src/components/analysis/score-breakdown.tsx"
      provides: "Expandable component score bars"
      exports: ["ScoreBreakdown"]
    - path: "src/components/analysis/company-insights.tsx"
      provides: "AI commentary section"
      exports: ["CompanyInsights"]
    - path: "src/components/analysis/pitch-angles.tsx"
      provides: "Pitch recommendation cards"
      exports: ["PitchAngles"]
    - path: "src/components/analysis/objection-cards.tsx"
      provides: "Objection + response pairs"
      exports: ["ObjectionCards"]
  key_links:
    - from: "src/components/analysis/score-breakdown.tsx"
      to: "src/components/ui/collapsible.tsx"
      via: "Collapsible wrapper"
      pattern: "Collapsible"
    - from: "src/components/analysis/*.tsx"
      to: "src/lib/analysis/schemas.ts"
      via: "Type imports for props"
      pattern: "import.*from.*schemas"
---

<objective>
Build remaining analysis result components: score breakdown, insights, pitches, and objections.

Purpose: Complete the analysis result UI so users see the full value of AI analysis.

Output: 4 analysis display components following CONTEXT.md design decisions.
</objective>

<execution_context>
@C:\Users\farre\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\farre\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-ai-analysis/04-CONTEXT.md
@.planning/phases/04-ai-analysis/04-RESEARCH.md
@.planning/phases/04-ai-analysis/04-03-SUMMARY.md

@src/lib/analysis/schemas.ts
@src/components/ui/collapsible.tsx
@src/components/ui/card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Score Breakdown Component</name>
  <files>src/components/analysis/score-breakdown.tsx</files>
  <action>
Create expandable score breakdown per CONTEXT.md: "Component scores displayed as horizontal bars with percentage labels. Each component bar is expandable - click to reveal AI-written reasoning."

Props:
```typescript
interface ScoreBreakdownProps {
  componentScores: ComponentScore[];
  icpMatchPercentage: number;  // Also shown as component
}
```

For each component score, render a ScoreBar:
```typescript
function ScoreBar({ name, score, reasoning }: {
  name: string;
  score: number;
  reasoning: string;
}) {
  const [open, setOpen] = useState(false);

  // Color: green >= 70, yellow >= 40, red < 40
  const barColor = score >= 70 ? 'bg-green-500'
    : score >= 40 ? 'bg-yellow-500'
    : 'bg-red-500';

  return (
    <Collapsible open={open} onOpenChange={setOpen}>
      <CollapsibleTrigger className="w-full text-left">
        <div className="flex items-center justify-between py-2">
          <span className="font-medium">{name}</span>
          <div className="flex items-center gap-2">
            <span className="text-sm text-muted-foreground">{score}%</span>
            <ChevronDown className={cn("h-4 w-4 transition-transform", open && "rotate-180")} />
          </div>
        </div>
        <div className="h-2 w-full rounded-full bg-muted">
          <div className={cn("h-full rounded-full transition-all", barColor)}
               style={{ width: `${score}%` }} />
        </div>
      </CollapsibleTrigger>
      <CollapsibleContent className="pt-2 pb-4 text-sm text-muted-foreground">
        {reasoning}
      </CollapsibleContent>
    </Collapsible>
  );
}
```

Add ICP Match as first item in the list (per CONTEXT: "ICP match percentage shown as headline alongside lead score AND as a component in breakdown").

Import ChevronDown from lucide-react.
Import cn from @/lib/utils.
Add "use client" directive.
  </action>
  <verify>
Component renders with sample data.
Click expands to show reasoning.
Chevron rotates on expand.
  </verify>
  <done>
Score breakdown shows all component scores as colored bars that expand to reveal reasoning.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Company Insights Component</name>
  <files>src/components/analysis/company-insights.tsx</files>
  <action>
Create insights display per CONTEXT.md: "Company insights section shows extracted data PLUS AI-written interpretive commentary."

Props:
```typescript
interface CompanyInsightsProps {
  insights: CompanyInsights;
  companyData: {
    industry?: string;
    employeeCount?: string;
    location?: string;
    techStack?: string[];
  };
}
```

Layout (Card wrapper):
1. Summary at top - the AI interpretive commentary (text-lg, slightly emphasized)
2. Grid of extracted facts:
   - Industry
   - Size (employeeCount)
   - Location
   - Tech Stack (as badges)
3. Strengths section - green checkmarks + text
4. Concerns section - yellow warning icons + text

Use Card, CardHeader, CardTitle, CardContent.
Import Check and AlertTriangle from lucide-react.
  </action>
  <verify>
Component renders with sample insights.
Strengths show green indicators.
Concerns show yellow indicators.
  </verify>
  <done>
Company insights display extracted data with AI commentary, strengths, and concerns.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Pitch Angles and Objection Cards Components</name>
  <files>
    src/components/analysis/pitch-angles.tsx
    src/components/analysis/objection-cards.tsx
  </files>
  <action>
Create pitch angles component per CONTEXT.md: "Each pitch angle structured as: bold headline hook + 2-3 sentence explanation of the angle and why it works."

**pitch-angles.tsx:**
Props:
```typescript
interface PitchAnglesProps {
  pitchAngles: PitchAngle[];
}
```

Layout:
- Section title "Pitch Angles"
- For each pitch:
  - Bold headline (font-semibold text-lg)
  - Explanation paragraph
  - "Why it works" in italic or muted color as supporting text
- Use Card for each pitch with subtle border/shadow

---

**objection-cards.tsx:**
Per CONTEXT.md: "Predicted objections shown with recommended responses together (paired cards), not expandable - both visible immediately."

Props:
```typescript
interface ObjectionCardsProps {
  objections: PredictedObjection[];
}
```

Layout:
- Section title "Predicted Objections"
- For each objection:
  - Objection text with likelihood badge (high/medium/low with appropriate color)
  - Recommended response immediately below (not collapsed)
- high = red-ish, medium = yellow, low = green badge colors
- Use Card for each objection

Import Badge from @/components/ui/badge.
  </action>
  <verify>
Both components render with sample data.
Pitch angles show distinct headline styling.
Objections show likelihood badges with correct colors.
  </verify>
  <done>
Pitch angles display 2-3 distinct approaches. Objections show prediction + response pairs with likelihood indicators.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. Score breakdown bars are colored and expandable
3. Company insights shows summary + facts + strengths/concerns
4. Pitch angles show bold headlines with explanations
5. Objection cards show paired prediction + response
</verification>

<success_criteria>
- All component scores expandable to show reasoning
- Company insights include AI commentary not just data
- Pitches are distinct and actionable
- Objections paired with responses for immediate action
</success_criteria>

<output>
After completion, create `.planning/phases/04-ai-analysis/04-04-SUMMARY.md`
</output>
